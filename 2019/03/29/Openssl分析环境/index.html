<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">









    <link rel="dns-prefetch" href="https://fonts.googleapis.com">





    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Https介绍--环境搭建 | 
        
        Love Way
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no">
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content="">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?NKhlKQkXw/c66TR5p4wO+w==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Love Way">
    <meta name="msapplication-starturl" content="http://yoursite.com/2019/03/29/Openssl分析环境/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Love Way">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com/2019/03/29/Openssl分析环境/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Https介绍--环境搭建 | Love Way">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="">
    

    
        <meta property="article:published_time" content="Fri Mar 29 2019 14:28:53 GMT+0800">
        <meta property="article:modified_time" content="Fri Mar 29 2019 16:53:31 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://yoursite.com/2019/03/29/Openssl分析环境/index.html">
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://yoursite.com/2019/03/29/Openssl分析环境/index.html",
    "headline": "Https介绍--环境搭建",
    "datePublished": "Fri Mar 29 2019 14:28:53 GMT+0800",
    "dateModified": "Fri Mar 29 2019 16:53:31 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Aderan",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.png"
        },
        "description": "Hi, nice to meet you"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Love Way",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": "",
    "description": "",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn" class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#导言"><span class="post-toc-number">1.</span> <span class="post-toc-text">导言</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用Openssl创建自签名证书"><span class="post-toc-number">2.</span> <span class="post-toc-text">使用Openssl创建自签名证书</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#创建服务器私钥"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">创建服务器私钥</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#生成服务器端证书签名请求文件-csr文件"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">生成服务器端证书签名请求文件(csr文件)</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#生成CA证书文件"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">生成CA证书文件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#生成CA自签名证书"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">生成CA自签名证书</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#利用CA证书对服务端请求文件进行签名"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">利用CA证书对服务端请求文件进行签名</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#将server-key由PKCS-1编码改成PKCS-8无加密编码"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">将server.key由PKCS#1编码改成PKCS#8无加密编码</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置Nginx支持https"><span class="post-toc-number">3.</span> <span class="post-toc-text">配置Nginx支持https</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用Wireshark查看TLS层交互"><span class="post-toc-number">4.</span> <span class="post-toc-text">使用Wireshark查看TLS层交互</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#参考链接"><span class="post-toc-number">5.</span> <span class="post-toc-text">参考链接</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Https介绍--环境搭建
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar">
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Aderan</strong>
        <span>3月 29, 2019</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Https介绍--环境搭建&url=http://yoursite.com/2019/03/29/Openssl分析环境/index.html&pic=http://yoursite.com/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Https介绍--环境搭建&url=http://yoursite.com/2019/03/29/Openssl分析环境/index.html&via=Aderan" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2019/03/29/Openssl分析环境/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://yoursite.com/2019/03/29/Openssl分析环境/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h3 id="导言"><a href="#导言" class="headerlink" title="导言"></a>导言</h3><p>本文涉及一些Https相关简单知识，通过搭建一个支持Https的本地服务，使用Wireshark查看TLS数据及字段概念，为后续深入了解TLS及https构建环境。</p>
<p>首先会介绍一下Openssl创建自签名证书的流程，并对X.509标准下的数字证书做一点简单的介绍，希望能理清一些术语或概念的认知。然后配置本地Https的服务，使能通过浏览器访问简单页面。通过Wireshark抓取本地端口的相关数据简单查看下TLS层。</p>
<p>本文相信，通过实际的操作、尝试、思考，能对相关的知识有更直观的了解。</p>
<h3 id="使用Openssl创建自签名证书"><a href="#使用Openssl创建自签名证书" class="headerlink" title="使用Openssl创建自签名证书"></a>使用Openssl创建自签名证书</h3><p>X.509是一套公钥证书标准，生成证书过程中，会涉及到很多文件，这里暂时只说明三个扩展名，.key、.csr、.crt</p>
<ul>
<li>.key文件存储服务器私钥；</li>
<li>.csr文件为发送至CA签名的请求文件，为certificate signing request缩写；</li>
<li>.crt为CA签名后的文件。即最终公钥私钥为.crt和.key文件。</li>
</ul>
<p>通过openssl签名创建过程的介绍及后续Nginx配置使用的文件对比，能更好的了解不同文件的概念。本节先介绍下整个自签名证书创建流程。</p>
<h4 id="创建服务器私钥"><a href="#创建服务器私钥" class="headerlink" title="创建服务器私钥"></a>创建服务器私钥</h4><p><code>openssl genrsa -des3 -out server.key 1024</code></p>
<p>创建时需要输入密码，为方便说明，设置密码为123456。</p>
<p>cat server.key，可以看到，文件中包含RSA私钥，DES及分组模式CBC等信息。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN RSA PRIVATE KEY-----</span><br><span class="line">Proc-Type: 4,ENCRYPTED</span><br><span class="line">DEK-Info: DES-EDE3-CBC,FBDA8344A729AEA4</span><br><span class="line"></span><br><span class="line">865SFWFNrNAmLuPQJXirwd7mj5xuKdLIcdCtkijj02JplMQ76dDfj1BaCj/qGUZG</span><br><span class="line">FqZpZce47bemYoi1+3BTY8wy8eYfK+3D5ycnFnjx+uE+xySS9japDPaBwtLvL/Ao</span><br><span class="line">EnMkHrPLYCimcndjskyH9zFmfC9yeP0uCUeY4MPSJmHlHX6+hmUnFEC42NIZcC4R</span><br><span class="line">QDmC72w1T3zPlvwtVQ7gcKL9UwcMMDcqHF/hNGTmfGV83glMkYULpTMKCt2Kccn1</span><br><span class="line">4Rn8Yd7tRlK5qUnGoZPh2Ic5zdX1hmENWBJjQCydzHnmG3/ukGi/vR9mu+oGcqj6</span><br><span class="line">YcB7EZlzPY/i1UXo8T6mZSXNVjUDz7t48sazd/6vvlNrG1mQ9N+AC6u0xyLoA8xE</span><br><span class="line">hDurs1uugkgPWOn4PelPtACo7CODkCRvuKoa1tEFTqlTCo67oxAttgIOtEHMOBwU</span><br><span class="line">H04kvfdHroJU//GomL1H+m8asexjJAPDZEdoWB++OTYtwviuE9VUCwpUfgdQEmdz</span><br><span class="line">OL1F9ntzfi9U34wYKPz2bJhUOEu28KFxYiRstl6ACDCtYjjoSf0doLWd7onA7/zo</span><br><span class="line">zo9C5384CcpwX1RhvrCxfM/5CLuL/a9S1NURp5hoX6NyeHnJA4OK83gFr0srwO9n</span><br><span class="line">E2eZH6NBWvfkuMJFG+gpeYcgL84fn19+H88Jd979Qzcgpt3jIqRzfW4+vLuhou7G</span><br><span class="line">i+iW1YLFTUPyLXjJF//DLBlDVLVwYORo24hWfNfeI7fiqPSO3EZZLt6/YbBQkP9i</span><br><span class="line">0U6rieB7gV+IegowzfWDauXkLiVLVlGwXU3SB7Pz8yobiIvedbVHGg==</span><br><span class="line">-----END RSA PRIVATE KEY-----</span><br></pre></td></tr></table></figure></p>
<h4 id="生成服务器端证书签名请求文件-csr文件"><a href="#生成服务器端证书签名请求文件-csr文件" class="headerlink" title="生成服务器端证书签名请求文件(csr文件)"></a>生成服务器端证书签名请求文件(csr文件)</h4><p><code>openssl req -new -key server.key -out server.csr</code></p>
<p>可以看到.csr文件由.key文件生成，需要输入第一步设置的密码123456。之后需要填入相关证书信息。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-----</span><br><span class="line">Country Name (2 letter code) []:CN</span><br><span class="line">State or Province Name (full name) []:ZJ</span><br><span class="line">Locality Name (eg, city) []:HZ</span><br><span class="line">Organization Name (eg, company) []:aderan</span><br><span class="line">Organizational Unit Name (eg, section) []:network</span><br><span class="line">Common Name (eg, fully qualified host name) []:aderan.com</span><br><span class="line">Email Address []:aderan@163.com</span><br><span class="line"></span><br><span class="line">Please enter the following &apos;extra&apos; attributes</span><br><span class="line">to be sent with your certificate request</span><br><span class="line">A challenge password []:111111</span><br></pre></td></tr></table></figure></p>
<p>按正常流程，使用生成.csr文件向公认的CA机构去签名申请.crt。</p>
<p>以下为自签名流程。</p>
<h4 id="生成CA证书文件"><a href="#生成CA证书文件" class="headerlink" title="生成CA证书文件"></a>生成CA证书文件</h4><p><code>openssl genrsa -des3 -out ca.key 1024</code></p>
<p>设置ca.key密码为654321</p>
<h4 id="生成CA自签名证书"><a href="#生成CA自签名证书" class="headerlink" title="生成CA自签名证书"></a>生成CA自签名证书</h4><p><code>openssl req -new -x509 -key ca.key -out ca.crt -days 3650</code></p>
<p>输入ca.key密码，输入相关对应信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-----</span><br><span class="line">Country Name (2 letter code) []:CN</span><br><span class="line">State or Province Name (full name) []:ZJ</span><br><span class="line">Locality Name (eg, city) []:HZ</span><br><span class="line">Organization Name (eg, company) []:aderan</span><br><span class="line">Organizational Unit Name (eg, section) []:network</span><br><span class="line">Common Name (eg, fully qualified host name) []:aderan.com</span><br><span class="line">Email Address []:aderan@163.com</span><br></pre></td></tr></table></figure></p>
<h4 id="利用CA证书对服务端请求文件进行签名"><a href="#利用CA证书对服务端请求文件进行签名" class="headerlink" title="利用CA证书对服务端请求文件进行签名"></a>利用CA证书对服务端请求文件进行签名</h4><p><code>openssl ca -in server.csr -out server.crt -cert ca.crt -keyfile ca.key</code></p>
<p>此时会出现很多错误提示，例如<br>Using configuration from /private/etc/ssl/openssl.cnf<br>variable lookup failed for ca::default_ca<br>解决方案:<br>配置相应的openssl，参考<a href="https://www.phildev.net/ssl/opensslconf.html" target="_blank" rel="noopener">opensslconf</a>配置，以下为简单新增的一些配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[ ca ]</span><br><span class="line">default_ca = Ca_default #引用子配置项</span><br><span class="line"></span><br><span class="line">[ Ca_default ]</span><br><span class="line">dir          = /var/ca</span><br><span class="line">certs           = $dir/certsdb</span><br><span class="line">new_certs_dir   = $certs</span><br><span class="line">database        = $dir/index.txt</span><br><span class="line">certificate     = $dir/cacert.pem</span><br><span class="line">private_key     = $dir/private/cakey.pem</span><br><span class="line">serial          = $dir/serial</span><br><span class="line">crldir          = $dir/crl</span><br><span class="line">crlnumber       = $dir/crlnumber</span><br><span class="line">crl             = $crldir/crl.pem</span><br><span class="line">RANDFILE        = $dir/private/.rand</span><br><span class="line"></span><br><span class="line">default_md = md5</span><br><span class="line">policy     = policy_anything</span><br><span class="line">default_days  = 365</span><br><span class="line"></span><br><span class="line">[ policy_anything ]</span><br><span class="line">countryName             = optional</span><br><span class="line">stateOrProvinceName     = optional</span><br><span class="line">localityName            = optional</span><br><span class="line">organizationName        = optional</span><br><span class="line">organizationalUnitName  = optional</span><br><span class="line">commonName              = supplied</span><br><span class="line">emailAddress            = optional</span><br></pre></td></tr></table></figure></p>
<p>/var/ca/index.txt: No such file or directory<br>unable to open ‘/var/ca/index.txt’<br>解决方案：<br><code>touch /var/ca/index.txt</code></p>
<p>/var/ca/serial: No such file or directory<br>error while loading serial number<br>解决方案：<br><code>touch /var/ca/serial &amp;&amp; echo 01  &gt;&gt; /var/ca/serial</code></p>
<p>Write out database with 1 new entries<br>/var/ca/certsdb/01.pem: No such file or directory<br>解决方案：<br><code>mkdir /var/ca/certsdb</code></p>
<p>正常执行，目录下会生成自签名后的文件server.crt<br><br>cat server.crt，查看到类似如下文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">Certificate:</span><br><span class="line">    Data:</span><br><span class="line">        Version: 1 (0x0)</span><br><span class="line">        Serial Number: 1 (0x1)</span><br><span class="line">    Signature Algorithm: md5WithRSAEncryption</span><br><span class="line">        Issuer: C=CN, ST=ZJ, L=HZ, O=XXX, OU=aderan, CN=aderan.com/emailAddress=aderan@163.com</span><br><span class="line">        Validity</span><br><span class="line">            Not Before: Mar 28 02:39:15 2019 GMT</span><br><span class="line">            Not After : Mar 27 02:39:15 2020 GMT</span><br><span class="line">        Subject: C=CN, ST=ZJ, L=HZ, O=XXX, OU=aderan, CN=aderan.com/emailAddress=aderan@163.com</span><br><span class="line">        Subject Public Key Info:</span><br><span class="line">            Public Key Algorithm: rsaEncryption</span><br><span class="line">                Public-Key: (1024 bit)</span><br><span class="line">                Modulus:</span><br><span class="line">                    00:cd:8c:72:24:c9:29:47:54:9e:49:ac:c1:1c:10:</span><br><span class="line">                    d4:2d:6a:5a:a8:b9:f8:e4:17:ff:2b:c9:80:ec:03:</span><br><span class="line">                    07:e8:8e:29:bd:08:3f:16:83:93:38:05:0b:0f:4a:</span><br><span class="line">                    00:f5:f8:cd:c2:98:66:65:c2:d7:83:05:c5:81:79:</span><br><span class="line">                    1e:a4:18:dd:9e:de:bd:aa:02:cf:25:6c:0b:0e:6f:</span><br><span class="line">                    c7:bc:bb:c1:b6:91:b7:aa:d2:a3:1c:bf:70:cf:ba:</span><br><span class="line">                    96:07:74:5b:4e:fb:c7:b6:6e:f7:d8:06:bf:21:32:</span><br><span class="line">                    da:3d:58:2f:6d:16:66:fc:92:c1:85:05:68:ef:1f:</span><br><span class="line">                    9f:7a:16:9f:8f:21:40:33:a5</span><br><span class="line">                Exponent: 65537 (0x10001)</span><br><span class="line">    Signature Algorithm: md5WithRSAEncryption</span><br><span class="line">         3c:3f:a7:da:9a:0f:40:99:15:5c:a6:a5:27:22:fa:56:80:90:</span><br><span class="line">         cd:40:7a:84:2a:24:64:e8:ab:cf:ae:25:69:66:ec:f2:95:e5:</span><br><span class="line">         18:20:69:80:73:40:70:de:71:3d:5e:3c:b2:58:5d:b8:70:7b:</span><br><span class="line">         ea:c8:37:20:89:22:e0:17:4b:3d:b2:5f:78:44:a4:71:0e:f8:</span><br><span class="line">         c4:32:a9:4f:05:69:86:aa:09:1b:7d:b7:47:a9:c7:a8:6a:24:</span><br><span class="line">         18:a0:d6:25:70:48:09:e7:f8:66:cc:f6:2b:6d:0a:01:13:c6:</span><br><span class="line">         f5:c7:88:e2:7f:aa:91:26:0c:22:36:6c:ff:e9:43:83:75:d2:</span><br><span class="line">         02:55</span><br><span class="line">-----BEGIN CERTIFICATE-----</span><br><span class="line">MIICYzCCAcwCAQEwDQYJKoZIhvcNAQEEBQAwejELMAkGA1UEBhMCQ04xCzAJBgNV</span><br><span class="line">BAgMAlpKMQswCQYDVQQHDAJIWjEMMAoGA1UECgwDWFhYMQ8wDQYDVQQLDAZhZGVy</span><br><span class="line">YW4xEzARBgNVBAMMCmFkZXJhbi5jb20xHTAbBgkqhkiG9w0BCQEWDmFkZXJhbkAx</span><br><span class="line">NjMuY29tMB4XDTE5MDMyODAyMzkxNVoXDTIwMDMyNzAyMzkxNVowejELMAkGA1UE</span><br><span class="line">BhMCQ04xCzAJBgNVBAgMAlpKMQswCQYDVQQHDAJIWjEMMAoGA1UECgwDWFhYMQ8w</span><br><span class="line">DQYDVQQLDAZhZGVyYW4xEzARBgNVBAMMCmFkZXJhbi5jb20xHTAbBgkqhkiG9w0B</span><br><span class="line">CQEWDmFkZXJhbkAxNjMuY29tMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDN</span><br><span class="line">jHIkySlHVJ5JrMEcENQtalqoufjkF/8ryYDsAwfojim9CD8Wg5M4BQsPSgD1+M3C</span><br><span class="line">mGZlwteDBcWBeR6kGN2e3r2qAs8lbAsOb8e8u8G2kbeq0qMcv3DPupYHdFtO+8e2</span><br><span class="line">bvfYBr8hMto9WC9tFmb8ksGFBWjvH596Fp+PIUAzpQIDAQABMA0GCSqGSIb3DQEB</span><br><span class="line">BAUAA4GBADw/p9qaD0CZFVympSci+laAkM1AeoQqJGToq8+uJWlm7PKV5RggaYBz</span><br><span class="line">QHDecT1ePLJYXbhwe+rINyCJIuAXSz2yX3hEpHEO+MQyqU8FaYaqCRt9t0epx6hq</span><br><span class="line">JBig1iVwSAnn+GbM9ittCgETxvXHiOJ/qpEmDCI2bP/pQ4N10gJV</span><br><span class="line">-----END CERTIFICATE-----</span><br></pre></td></tr></table></figure></p>
<h4 id="将server-key由PKCS-1编码改成PKCS-8无加密编码"><a href="#将server-key由PKCS-1编码改成PKCS-8无加密编码" class="headerlink" title="将server.key由PKCS#1编码改成PKCS#8无加密编码"></a>将server.key由PKCS#1编码改成PKCS#8无加密编码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv server.key server1.key</span><br><span class="line">openssl pkcs8 -topk8 -inform PEM -outform PEM -in server1.key -out server.key -nocrypt</span><br></pre></td></tr></table></figure>
<p>cat server.key，能发现不同编码之间的不同。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN PRIVATE KEY-----</span><br><span class="line">MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAM2MciTJKUdUnkms</span><br><span class="line">wRwQ1C1qWqi5+OQX/yvJgOwDB+iOKb0IPxaDkzgFCw9KAPX4zcKYZmXC14MFxYF5</span><br><span class="line">HqQY3Z7evaoCzyVsCw5vx7y7wbaRt6rSoxy/cM+6lgd0W077x7Zu99gGvyEy2j1Y</span><br><span class="line">L20WZvySwYUFaO8fn3oWn48hQDOlAgMBAAECgYEAhd9/SC4sUGTwYxO9AkaDqsCm</span><br><span class="line">I1ZcoFJww1gOO6kNsY1F6fRBAqzXaZj/Rwnv7kQJ3z/bEVQBgTh1FoqIRmBblj6a</span><br><span class="line">+sEt/sU4ParhFwVmRKn2exwIEOOfBk/VvM5GA/BFuxIXboreUdo9Y55TBltyUlZs</span><br><span class="line">ko7vyYZ2sGsulZPAfdECQQDrgPQRTciM+63FvapUm+RI+TYmt+qzM44PMz1mSJJh</span><br><span class="line">2mqiRvSIUyFfMfGxkAICp4ar1ByS02drVpuAXAIIKmJ7AkEA33AW9YHXxzIZIWwb</span><br><span class="line">0O/hA0X4YxC18rbT2VOyEI0fKdvDXjmOrKt/SJ1L/Qsz0BE7jaRmVuKhyslFo0vr</span><br><span class="line">UVR4XwJATOvbzGMZpGL4SWQ/5E7e667qrw7XjBzEw9Y6sdP2bBvJRKPkbzqn5c4M</span><br><span class="line">YbDl1zQc2rb3dkWyu+6X7/8dcslVTQJAW86CoH2pW3+KM+FnzIHDwsSNOqczG3dj</span><br><span class="line">tHhfQc26cEiMDbs4lFojAoMfJenkcCmkfp5+LlUQhXIN2vrmxZQfoQJBAKKLHlw/</span><br><span class="line">6ZFAov1wlxiSyP1YveX3PXhNgEbOK9CP5o+poZb01qCv9IVG1hWQCWPMuTcgoRH7</span><br><span class="line">+2XiHgcWQ12kRf4=</span><br><span class="line">-----END PRIVATE KEY-----</span><br></pre></td></tr></table></figure></p>
<h3 id="配置Nginx支持https"><a href="#配置Nginx支持https" class="headerlink" title="配置Nginx支持https"></a>配置Nginx支持https</h3><p>安装nginx</p>
<p>Mac上安装完，相关的配置路径如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/etc/nginx/nginx.conf （配置文件路径）</span><br><span class="line">/usr/local/var/www （服务器默认路径）</span><br><span class="line">/usr/local/Cellar/nginx/1.15.10 （貌似是安装路径）</span><br></pre></td></tr></table></figure></p>
<p>出于方便，直接开启nginx.conf下HTTPS server配置，配置证书路径<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># HTTPS server</span><br><span class="line">#</span><br><span class="line">server &#123;</span><br><span class="line">    listen       443 ssl http2 default_server;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    ssl_certificate      /pathto/server.crt;</span><br><span class="line">    ssl_certificate_key  /pathto/server.key;</span><br><span class="line"></span><br><span class="line">    ssl_session_cache    shared:SSL:1m;</span><br><span class="line">    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>配置过程中试了好几次，一直出现refuse connection错误。最后发现是配置文件出错，服务没有起来，使用nginx -t检查配置文件是否正确。附上常用的nginx命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nginx -s quit       优雅停止nginx，有连接时会等连接请求完成再杀死worker进程  </span><br><span class="line">nginx -s reload     优雅重启，并重新载入配置文件nginx.conf</span><br><span class="line">nginx -s reopen     重新打开日志文件，一般用于切割日志</span><br><span class="line">nginx -v            查看版本  </span><br><span class="line">nginx -t            检查nginx的配置文件</span><br><span class="line">nginx -h            查看帮助信息</span><br><span class="line">nginx -V            详细版本信息，包括编译参数 </span><br><span class="line">nginx  -c filename  指定配置文件</span><br></pre></td></tr></table></figure></p>
<h3 id="使用Wireshark查看TLS层交互"><a href="#使用Wireshark查看TLS层交互" class="headerlink" title="使用Wireshark查看TLS层交互"></a>使用Wireshark查看TLS层交互</h3><p>通过Wireshark协议数据，结合相关SSL介绍文章了解TLS的具体交互</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="https://blog.csdn.net/yongf_xu/article/details/85006854" target="_blank" rel="noopener">自签名证书生成过程</a></p>
<p><a href="https://www.phildev.net/ssl/opensslconf.html" target="_blank" rel="noopener">Openssl.conf Walkthru</a></p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2019/03/30/OAuth2介绍/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2019/03/29/Hexo使用介绍/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="Aderan's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        aderan@163.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2019/04/">四月 2019<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/03/">三月 2019<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/01/">一月 2019<span class="sidebar_archives-count">1</span></a>
            </li></ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material" class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year=""></span>&nbsp;Love Way
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?Bn9UzEm8RrBSxqyZB0zPjA==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>













<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 0000;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
